{"ast":null,"code":"import React,{useEffect}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Row,Col,ListGroup,Image,Form,Button,Card}from'react-bootstrap';import Message from'../components/Message';import{addToCart,removeFromCart}from'../actions/cartActions';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CartScreen=_ref=>{let{match,location,history}=_ref;const productId=match.params.id;const qty=location.search?Number(location.search.split('=')[1]):1;const dispatch=useDispatch();const cart=useSelector(state=>state.cart);const{cartItems}=cart;useEffect(()=>{if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);const removeFromCartHandler=id=>{dispatch(removeFromCart(id));};const checkoutHandler=()=>{history.push('/login?redirect=shipping');};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{children:[\"Your cart is empty \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back\"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(item=>/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:`/product/${item.product}`,children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\"\\u20B9\",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:e=>dispatch(addToCart(item.product,Number(e.target.value))),children:[...Array(item.countInStock).keys()].map(x=>/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1))})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:()=>removeFromCartHandler(item.product),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product))})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce((acc,item)=>acc+item.qty,0),\") items\"]}),\"\\u20B9\",cartItems.reduce((acc,item)=>acc+item.qty*item.price,0).toFixed(2)]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Proceed To Checkout\"})})]})})})]});};export default CartScreen;","map":{"version":3,"names":["React","useEffect","Link","useDispatch","useSelector","Row","Col","ListGroup","Image","Form","Button","Card","Message","addToCart","removeFromCart","jsx","_jsx","jsxs","_jsxs","CartScreen","_ref","match","location","history","productId","params","id","qty","search","Number","split","dispatch","cart","state","cartItems","removeFromCartHandler","checkoutHandler","push","children","md","length","to","variant","map","item","Item","src","image","alt","name","fluid","rounded","product","price","Control","as","value","onChange","e","target","Array","countInStock","keys","x","type","onClick","className","reduce","acc","toFixed","disabled"],"sources":["C:/Users/sajah/OneDrive/Desktop/sujatha/online-grocerystore/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Row, Col, ListGroup, Image, Form, Button, Card } from 'react-bootstrap'\r\nimport Message from '../components/Message'\r\nimport { addToCart, removeFromCart } from '../actions/cartActions'\r\n\r\nconst CartScreen = ({ match, location, history }) => {\r\n  const productId = match.params.id\r\n\r\n  const qty = location.search ? Number(location.search.split('=')[1]) : 1\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const cart = useSelector((state) => state.cart)\r\n  const { cartItems } = cart\r\n\r\n  useEffect(() => {\r\n    if (productId) {\r\n      dispatch(addToCart(productId, qty))\r\n    }\r\n  }, [dispatch, productId, qty])\r\n\r\n  const removeFromCartHandler = (id) => {\r\n    dispatch(removeFromCart(id))\r\n  }\r\n\r\n  const checkoutHandler = () => {\r\n    history.push('/login?redirect=shipping')\r\n  }\r\n\r\n  return (\r\n    <Row>\r\n      <Col md={8}>\r\n        <h1>Shopping Cart</h1>\r\n        {cartItems.length === 0 ? (\r\n          <Message>\r\n            Your cart is empty <Link to='/'>Go Back</Link>\r\n          </Message>\r\n        ) : (\r\n          <ListGroup variant='flush'>\r\n            {cartItems.map((item) => (\r\n              <ListGroup.Item key={item.product}>\r\n                <Row>\r\n                  <Col md={2}>\r\n                    <Image src={item.image} alt={item.name} fluid rounded />\r\n                  </Col>\r\n                  <Col md={3}>\r\n                    <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                  </Col>\r\n                  <Col md={2}>₹{item.price}</Col>\r\n                  <Col md={2}>\r\n                    <Form.Control\r\n                      as='select'\r\n                      value={item.qty}\r\n                      onChange={(e) =>\r\n                        dispatch(\r\n                          addToCart(item.product, Number(e.target.value))\r\n                        )\r\n                      }\r\n                    >\r\n                      {[...Array(item.countInStock).keys()].map((x) => (\r\n                        <option key={x + 1} value={x + 1}>\r\n                          {x + 1}\r\n                        </option>\r\n                      ))}\r\n                    </Form.Control>\r\n                  </Col>\r\n                  <Col md={2}>\r\n                    <Button\r\n                      type='button'\r\n                      variant='light'\r\n                      onClick={() => removeFromCartHandler(item.product)}\r\n                    >\r\n                      <i className='fas fa-trash'></i>\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n            ))}\r\n          </ListGroup>\r\n        )}\r\n      </Col>\r\n      <Col md={4}>\r\n        <Card>\r\n          <ListGroup variant='flush'>\r\n            <ListGroup.Item>\r\n              <h2>\r\n                Subtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)})\r\n                items\r\n              </h2>\r\n              ₹\r\n              {cartItems\r\n                .reduce((acc, item) => acc + item.qty * item.price, 0)\r\n                .toFixed(2)}\r\n            </ListGroup.Item>\r\n            <ListGroup.Item>\r\n              <Button\r\n                type='button'\r\n                className='btn-block'\r\n                disabled={cartItems.length === 0}\r\n                onClick={checkoutHandler}\r\n              >\r\n                Proceed To Checkout\r\n              </Button>\r\n            </ListGroup.Item>\r\n          </ListGroup>\r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n\r\nexport default CartScreen\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}