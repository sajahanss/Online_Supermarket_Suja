{"ast":null,"code":"import React,{useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button,Row,Col}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import Loader from'../components/Loader';import Paginate from'../components/Paginate';import{listProducts,deleteProduct,createProduct}from'../actions/productActions';import{PRODUCT_CREATE_RESET}from'../constants/productConstants';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductListScreen=_ref=>{let{history,match}=_ref;const pageNumber=match.params.pageNumber||1;const dispatch=useDispatch();const productList=useSelector(state=>state.productList);const{loading,error,products,page,pages}=productList;const productDelete=useSelector(state=>state.productDelete);const{loading:loadingDelete,error:errorDelete,success:successDelete}=productDelete;const productCreate=useSelector(state=>state.productCreate);const{loading:loadingCreate,error:errorCreate,success:successCreate,product:createdProduct}=productCreate;const userLogin=useSelector(state=>state.userLogin);const{userInfo}=userLogin;useEffect(()=>{dispatch({type:PRODUCT_CREATE_RESET});if(!userInfo||!userInfo.isAdmin){history.push('/login');}if(successCreate){history.push(`/admin/product/${createdProduct._id}/edit`);}else{dispatch(listProducts('',pageNumber));}},[dispatch,history,userInfo,successDelete,successCreate,createdProduct,pageNumber]);const deleteHandler=id=>{if(window.confirm('Are you sure')){dispatch(deleteProduct(id));}};const createProductHandler=()=>{dispatch(createProduct());};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Products\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsxs(Button,{className:\"my-3\",onClick:createProductHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),\" Create Product\"]})})]}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),loadingCreate&&/*#__PURE__*/_jsx(Loader,{}),errorCreate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CATEGORY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"BRAND\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20B9\",product.price]}),/*#__PURE__*/_jsx(\"td\",{children:product.category}),/*#__PURE__*/_jsx(\"td\",{children:product.brand}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:`/admin/product/${product._id}/edit`,children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:()=>deleteHandler(product._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},product._id))})]}),/*#__PURE__*/_jsx(Paginate,{pages:pages,page:page,isAdmin:true})]})]});};export default ProductListScreen;","map":{"version":3,"names":["React","useEffect","LinkContainer","Table","Button","Row","Col","useDispatch","useSelector","Message","Loader","Paginate","listProducts","deleteProduct","createProduct","PRODUCT_CREATE_RESET","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductListScreen","_ref","history","match","pageNumber","params","dispatch","productList","state","loading","error","products","page","pages","productDelete","loadingDelete","errorDelete","success","successDelete","productCreate","loadingCreate","errorCreate","successCreate","product","createdProduct","userLogin","userInfo","type","isAdmin","push","_id","deleteHandler","id","window","confirm","createProductHandler","children","className","onClick","variant","striped","bordered","hover","responsive","map","name","price","category","brand","to"],"sources":["C:/Users/sajah/OneDrive/Desktop/sujatha/online-grocerystore/frontend/src/screens/ProductListScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport { Table, Button, Row, Col } from 'react-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Message from '../components/Message'\r\nimport Loader from '../components/Loader'\r\nimport Paginate from '../components/Paginate'\r\nimport {\r\n  listProducts,\r\n  deleteProduct,\r\n  createProduct,\r\n} from '../actions/productActions'\r\nimport { PRODUCT_CREATE_RESET } from '../constants/productConstants'\r\n\r\nconst ProductListScreen = ({ history, match }) => {\r\n  const pageNumber = match.params.pageNumber || 1\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const productList = useSelector((state) => state.productList)\r\n  const { loading, error, products, page, pages } = productList\r\n\r\n  const productDelete = useSelector((state) => state.productDelete)\r\n  const {\r\n    loading: loadingDelete,\r\n    error: errorDelete,\r\n    success: successDelete,\r\n  } = productDelete\r\n\r\n  const productCreate = useSelector((state) => state.productCreate)\r\n  const {\r\n    loading: loadingCreate,\r\n    error: errorCreate,\r\n    success: successCreate,\r\n    product: createdProduct,\r\n  } = productCreate\r\n\r\n  const userLogin = useSelector((state) => state.userLogin)\r\n  const { userInfo } = userLogin\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: PRODUCT_CREATE_RESET })\r\n\r\n    if (!userInfo || !userInfo.isAdmin) {\r\n      history.push('/login')\r\n    }\r\n\r\n    if (successCreate) {\r\n      history.push(`/admin/product/${createdProduct._id}/edit`)\r\n    } else {\r\n      dispatch(listProducts('', pageNumber))\r\n    }\r\n  }, [\r\n    dispatch,\r\n    history,\r\n    userInfo,\r\n    successDelete,\r\n    successCreate,\r\n    createdProduct,\r\n    pageNumber,\r\n  ])\r\n\r\n  const deleteHandler = (id) => {\r\n    if (window.confirm('Are you sure')) {\r\n      dispatch(deleteProduct(id))\r\n    }\r\n  }\r\n\r\n  const createProductHandler = () => {\r\n    dispatch(createProduct())\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Row className='align-items-center'>\r\n        <Col>\r\n          <h1>Products</h1>\r\n        </Col>\r\n        <Col className='text-right'>\r\n          <Button className='my-3' onClick={createProductHandler}>\r\n            <i className='fas fa-plus'></i> Create Product\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n      {loadingDelete && <Loader />}\r\n      {errorDelete && <Message variant='danger'>{errorDelete}</Message>}\r\n      {loadingCreate && <Loader />}\r\n      {errorCreate && <Message variant='danger'>{errorCreate}</Message>}\r\n      {loading ? (\r\n        <Loader />\r\n      ) : error ? (\r\n        <Message variant='danger'>{error}</Message>\r\n      ) : (\r\n        <>\r\n          <Table striped bordered hover responsive className='table-sm'>\r\n            <thead>\r\n              <tr>\r\n                <th>ID</th>\r\n                <th>NAME</th>\r\n                <th>PRICE</th>\r\n                <th>CATEGORY</th>\r\n                <th>BRAND</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {products.map((product) => (\r\n                <tr key={product._id}>\r\n                  <td>{product._id}</td>\r\n                  <td>{product.name}</td>\r\n                  <td>â‚¹{product.price}</td>\r\n                  <td>{product.category}</td>\r\n                  <td>{product.brand}</td>\r\n                  <td>\r\n                    <LinkContainer to={`/admin/product/${product._id}/edit`}>\r\n                      <Button variant='light' className='btn-sm'>\r\n                        <i className='fas fa-edit'></i>\r\n                      </Button>\r\n                    </LinkContainer>\r\n                    <Button\r\n                      variant='danger'\r\n                      className='btn-sm'\r\n                      onClick={() => deleteHandler(product._id)}\r\n                    >\r\n                      <i className='fas fa-trash'></i>\r\n                    </Button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n          <Paginate pages={pages} page={page} isAdmin={true} />\r\n        </>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ProductListScreen\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}